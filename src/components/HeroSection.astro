---
import { Image } from "astro:assets";

interface AudienceSegment {
  headline: string;
  substatement: string;
}

const description: string =
  "Our AI-driven platform delivers real-time risk insights and predictive analytics for brokers, carriers and underwritersâ€”helping you reduce losses, optimize coverage, and drive profitability across the senior care ecosystem.";

// Datos para los distintos segmentos de audiencia
const audienceSegments: AudienceSegment[] = [
  {
    headline: "Empowering Brokers with AI-Driven Analytics âœ¨",
    substatement:
      "Match clients with optimal coverage using real-time risk data and predictive analytics to close more deals and reduce policy turnover.",
  },
  {
    headline: "Precision Underwriting for Enhanced Results ðŸ“ˆ",
    substatement:
      "Accurately assess facility risks, customize policies with confidence, and reduce loss ratios while maintaining competitive pricing.",
  },
  {
    headline: "Transforming Carrier Operations through Intelligence ðŸ§ ",
    substatement:
      "Optimize your senior care portfolio with comprehensive data insights, predictive claim analytics, and automated risk assessment.",
  },
];

// TÃ­tulo principal constante
const mainTitle = "The Future of Senior Care Liabilityâ€”";
const highlight = "Powered by AI";
---

<section class="bg-gradient-to-r bg-[#0c285e] pb-6 sm:pb-16 md:pb-20 -mt-1">
  <div class="container mx-auto px-4 sm:px-6">
    <div class="flex flex-col md:flex-row md:space-x-10 items-center">
      <div class="w-full md:w-1/2 mb-8 md:mb-0">
        <h1
          class="text-3xl sm:text-4xl md:text-2xl lg:text-6xl text-white font-semibold tracking-wide mb-6 sm:mb-8"
        >
          {mainTitle}<span class="text-[#4A9FFF]">{highlight}</span>
        </h1>

        <p
          class="text-base sm:text-lg tracking-wider text-gray-200 mb-10 sm:mb-14 max-w-2xl leading-relaxed"
        >
          {description}
        </p>

        <!-- Slider for audience segments -->
        <!-- <div
          class="slider-container relative overflow-hidden rounded-lg bg-white/20 shadow-sm backdrop-blur-sm mb-8"
        >
          <div
            id="slider-track"
            class="flex transition-transform duration-500 ease-in-out"
          >
            {audienceSegments.map((segment, index) => (
              <div
                class="slider-slide min-w-full px-4 sm:px-6 py-6 sm:py-8"
                data-index={index}
              >
                <h3 class="text-xl sm:text-2xl font-semibold text-[#4A9FFF] mb-2 sm:mb-3 flex items-center gap-2 tracking-tight">
                  <span class="slide-number flex-shrink-0 flex items-center justify-center h-6 w-6 sm:h-8 sm:w-8 rounded-full bg-[#4A9FFF]/20 text-[#4A9FFF] text-xs sm:text-sm">
                    {index + 1}
                  </span>
                  <span class="min-w-0">{segment.headline}</span>
                </h3>
                <p class="text-base sm:text-lg text-gray-200 mb-0 max-w-2xl leading-relaxed antialiased font-normal">
                  {segment.substatement}
                </p>
              </div>
            ))}
          </div>

          <div
            class="slider-controls flex justify-center items-center mt-3 sm:mt-4 px-2 py-2"
          >
            <div class="slider-dots flex space-x-2 sm:space-x-3">
              {audienceSegments.map((_, index) => (
                <button
                  class={`slider-dot h-1.5 sm:h-2 w-6 sm:w-10 rounded-full transition-all duration-300 ${index === 0 ? "bg-[#2A669F] w-10 sm:w-16" : "bg-gray-300"}`}
                  data-index={index}
                  aria-label={`Switch to segment ${index + 1}`}
                />
              ))}
            </div>
          </div>
        </div> -->

        <div
          class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4"
        >
        <a
          href="#analyze"
          class="relative overflow-hidden bg-white text-[#0c285e] border border-[#0c285e] hover:bg-[#0c285e] hover:text-white hover:border-white hover:shadow-[0_0_15px_rgba(255,255,255,0.8)] transition-all duration-300 font-medium sm:font-semibold px-8 sm:px-8 py-3 sm:py-6 rounded-xl sm:rounded-2xl text-center text-sm sm:text-base before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white before:to-transparent before:opacity-0 hover:before:opacity-20 before:transition-opacity before:duration-500"
        >
          Register for Advanced Analytics
        </a>
        </div>
      </div>
      <div class="relative w-full md:w-1/2 rounded-xl sm:rounded-2xl bg-white/30 border-1 border-transparent hover:border-white hover:shadow-[0_0_15px_rgba(255,255,255,0.4)] transition-all duration-300">
        <Image
          src="/images/map.png"
          alt="Caring for seniors"
          width={800}
          height={600}
          class="rounded-lg w-full h-auto"
        />
      </div>
           
    </div>
  </div>
</section>

<script>
  // Function to handle slider functionality
  function setupSlider() {
    const sliderTrack = document.getElementById("slider-track");
    const slides = document.querySelectorAll(".slider-slide");
    const dots = document.querySelectorAll(".slider-dot");

    // Check if elements exist before proceeding
    if (!sliderTrack) {
      console.error("Slider elements not found");
      return;
    }

    let currentIndex = 0;
    const totalSlides = slides.length;

    // Function to update the slider position
    function goToSlide(index: number): void {
      // Normalize index (loop back if needed)
      if (index < 0) index = totalSlides - 1;
      if (index >= totalSlides) index = 0;

      // Update the transform to slide to the correct position
      (sliderTrack as HTMLElement).style.transform =
        `translateX(-${index * 100}%)`;

      // Update active dot
      dots.forEach((dot, i) => {
        dot.classList.toggle("bg-[#2A669F]", i === index);
        dot.classList.toggle("bg-gray-300", i !== index);

        // Handle responsive widths
        if (i === index) {
          dot.classList.add("w-10", "sm:w-16");
          dot.classList.remove("w-6", "sm:w-10");
        } else {
          dot.classList.add("w-6", "sm:w-10");
          dot.classList.remove("w-10", "sm:w-16");
        }
      });

      currentIndex = index;
    }

    // Set up automatic rotation
    let autoRotation = setInterval(() => {
      goToSlide(currentIndex + 1);
    }, 5000);

    // Reset timer when manually changing slides
    function resetTimer() {
      clearInterval(autoRotation);
      autoRotation = setInterval(() => {
        goToSlide(currentIndex + 1);
      }, 5000);
    }

    // Setup click handlers for dots
    dots.forEach((dot, index) => {
      dot.addEventListener("click", () => {
        goToSlide(index);
        resetTimer();
      });
    });

    // Initialize the slider
    goToSlide(0);
  }

  // Run the setup when the DOM is loaded
  document.addEventListener("DOMContentLoaded", setupSlider);
</script>

<style>
  .slider-container {
    overflow: hidden;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    background-color: rgba(255, 255, 255, 0.15);
  }

  @media (min-width: 640px) {
    .slider-container {
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    }
  }

  .slider-track {
    display: flex;
    transition: transform 0.5s ease-in-out;
  }

  .slider-slide {
    min-width: 100%;
  }

  .slider-slide h3 {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    letter-spacing: -0.01em;
  }

  .slider-slide p {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    color: rgba(236, 236, 236, 0.9);
  }

  .slider-dot {
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .slider-dot:hover {
    background-color: rgba(74, 159, 255, 0.7);
  }

  .slider-controls {
    margin-top: -6px;
  }

  @media (min-width: 640px) {
    .slider-controls {
      margin-top: -8px;
    }
  }

  .slide-number {
    font-weight: 600;
  }
</style>
